{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "required": ["version", "modules"],
  "properties": {
    "version": {"type": "integer"},
    "modules": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "name",
          "path_root",
          "owner",
          "type",
          "runtime",
          "ports",
          "compose_files",
          "contracts_path",
          "tests_path",
          "healthchecks",
          "owns_paths",
          "shared_paths",
          "shared_paths_consumers",
          "produces",
          "consumes",
          "test_suites",
          "test_cmds"
        ],
        "properties": {
          "name": {"type": "string"},
          "path_root": {"type": "string"},
          "owner": {"type": "string"},
          "type": {"type": "string"},
          "runtime": {"type": "string"},
          "ports": {
            "oneOf": [
              {"type": "string", "enum": ["none"]},
              {"type": "array", "items": {"type": "integer"}}
            ]
          },
          "compose_files": {"type": "array", "items": {"type": "string"}},
          "contracts_path": {"type": "string"},
          "tests_path": {"type": "string"},
          "healthchecks": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["kind", "target"],
              "properties": {
                "kind": {"type": "string"},
                "target": {"type": "string"}
              }
            }
          },
          "owns_paths": {"type": "array", "items": {"type": "string"}},
          "shared_paths": {"type": "array", "items": {"type": "string"}},
          "shared_paths_consumers": {"type": "array", "items": {"type": "string"}},
          "produces": {"type": "array", "items": {"type": "string"}},
          "consumes": {"type": "array", "items": {"type": "string"}},
          "test_suites": {"type": "array", "items": {"type": "string"}},
          "test_cmds": {"type": "object"}
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}
