# AI Version Log

Registro incremental obligatorio de cambios aplicados por agentes AI.

| FECHA | VERSION_ANTERIOR | VERSION_NUEVA | AGENTE | MODULOS | RESUMEN |
|---|---|---|---|---|---|
| 2026-02-13 | 1.0002 | 1.0003 | Codex | pronto-employees, pronto-client, pronto-static, pronto-api, pronto-libs, pronto-scripts | Corrección real de endpoints faltantes en runtime para clientes/empleados, validación de contenedores healthy, y consolidación de control de versión en .env/AGENTS. |
| 2026-02-13 | 1.0003 | 1.0004 | Codex | pronto-scripts | Corrección real de `rebuild`/sync estático: detección robusta del contenedor static y fix de typo `employee`->`employees` para evitar despliegues con assets desactualizados. |
| 2026-02-13 | 1.0004 | 1.0005 | Codex | pronto-static, pronto-docs, pronto-scripts | Corrección de flujo de menú cliente para IDs UUID (sin NaN), fallback robusto de placeholder de imágenes y normalización de tipado de carrito; registro y cierre formal del bug en tracker de errores. |
| 2026-02-13 | 1.0005 | 1.0006 | Codex | pronto-tests, pronto-docs, pronto-scripts/pronto-root | Alineacion del set funcional Playwright a contratos/rutas vigentes (auth CSRF, menu API data.categories, empleados/login), eliminacion de pruebas legacy fragiles y validacion final en verde (`npm run test:functionality`: 35/35). |
| 2026-02-13 | 1.0006 | 1.0007 | Codex | pronto-api, pronto-tests, pronto-docs, pronto-scripts/pronto-root | Fix CORS preflight para checkout cliente (`X-CSRFToken` permitido en `Access-Control-Allow-Headers`), rebuild de servicios y validación iterativa hasta suite funcional completa en verde (`35/35`). |
| 2026-02-13 | 1.0007 | 1.0008 | Codex | pronto-static, pronto-tests, pronto-docs, pronto-scripts/pronto-root | Corrección de loop de sesión en login employees (401 en login ya no fuerza redirect), estabilización visual del login en modo invitado y prueba de regresión E2E para asegurar que no aparezca sidebar en `/employees/login`; suite funcional completa en verde (`36/36`). |
| 2026-02-13 | 1.0008 | 1.0009 | Codex | pronto-static, pronto-employees, pronto-docs, pronto-scripts/pronto-root | Normalización visual de logins de empleados por rol (escala/layout uniforme) y corrección de ubicación de versión para mostrarla fija en viewport sin scroll. |
| 2026-02-13 | 1.0009 | 1.0010 | Codex | pronto-static, pronto-tests, pronto-scripts/pronto-root | Modularización del bundle employees: bootstrap separado, shell/components en import asíncrono, carga diferida de store de órdenes y chunking dedicado (router-vendor, pinia-vendor, employees-core, employees-store) para reducir main.js y mantener login/flujo estable. |
| 2026-02-13 | 1.0010 | 1.0011 | Codex | pronto-static, pronto-scripts/pronto-root | Fix final de login employees: eliminación del throw sintético de Sesión expirada en wrapper HTTP para preservar mensaje real del backend en login (Credenciales inválidas), rebuild de assets y reinicio de static. |
| 2026-02-13 | 1.0011 | 1.0012 | Codex | pronto-static, pronto-scripts/pronto-root | Corrección de login shell employees: reemplazo de dependencia global window.requestJSON por import tipado de core/http y omisión de fetchUser en rutas guest para eliminar errores 401/console noise al abrir login. |
| 2026-02-13 | 1.0012 | 1.0013 | Codex | pronto-libs, pronto-employees, pronto-static, pronto-tests, pronto-docs, pronto-scripts/pronto-root | Fix de login empleados por roles: `has_scope` ahora considera rol principal/jerarquía canónica, serialización UUID en JWT/JSON de auth, y ajuste de frontend para no redirigir en 403 dentro de login; validación completa con suite funcional en verde (`36/36`) y prueba dedicada de login por 5 roles (`5/5`). |
| 2026-02-13 | 1.0013 | 1.0014 | Codex | pronto-scripts, pronto-docs, pronto-scripts/pronto-root | Corrección de `validate-seed.sh`: detección robusta de contenedor employees, rutas absolutas y fail-fast real (sin falso positivo de éxito); documentación de error resuelto y apertura de incidente por desalineación modelo/esquema de `pronto_areas` que rompe seed ORM. |
| 2026-02-13 | 1.0014 | 1.0015 | Codex | pronto-employees, pronto-static, pronto-docs, pronto-scripts/pronto-root | Fix de 404 en employees para `/authorization-error` y `/favicon.ico`, y robustez de detección de login path en interceptor HTTP para evitar redirección errónea desde login; validado con Playwright y checks HTTP en 6081. |
| 2026-02-13 | 1.0015 | 1.0016 | Codex | pronto-static, pronto-employees, pronto-scripts/pronto-root | Corrección visual y de flujo en login employees: hardening del shell (Header/Sidebar/App/Dashboard), carga estática de `LoginPage` para eliminar mezcla de estado en login, compatibilidad de assets legacy en build de static y proxy server-side de `/assets/*` en employees para evitar fallos de chunks/CSS cross-origin. |
| 2026-02-13 | 1.0016 | 1.0017 | Codex | pronto-static, pronto-docs, pronto-scripts/pronto-root | Fix de placeholder en menú cliente: el fallback ya no usa la ruta de restaurante para placeholder inexistente y ahora aplica el placeholder global canónico para eliminar 404/OpaqueResponseBlocking. |
| 2026-02-13 | 1.0017 | 1.0018 | Codex | pronto-static, pronto-employees, pronto-api, pronto-scripts, pronto-docs, pronto-scripts/pronto-root | Estabilización de login employees y flujos de módulos: hardening de detección JSON en auth por rol, proxy/aliases de assets legacy, tolerancia a `vite:preloadError`, rutas explícitas para chunks legacy, y resiliencia en notificaciones waiter para evitar 500 cuando falta `pronto_waiter_calls`; migraciones/init-check ejecutados en verde. |
| 2026-02-13 | 1.0018 | 1.0019 | Codex | pronto-static, pronto-docs, pronto-scripts/pronto-root | Restricción de navegación por rol en employees: mesero limitado a Operación Mesero + Productos + Aditamientos + Mesas + Áreas; chef/cashier limitados a su módulo; guard de rutas actualizado para bloquear acceso por URL a módulos no permitidos. |
| 2026-02-13 | 1.0019 | 1.0020 | Codex | pronto-static, pronto-tests, pronto-docs, pronto-scripts/pronto-root | Endurecimiento final por scope activo: detección de contexto por ruta (`/waiter|/chef|/cashier`) + `APP_CONTEXT` + `active_scope` en App/Router para ocultar y bloquear módulos ADMIN en contexto waiter; compilación employees y pruebas Playwright (auth/orders/login flows) en verde. |
| 2026-02-13 | 1.0020 | 1.0021 | Codex | pronto-static, pronto-docs, pronto-scripts/pronto-root | Corrección visual de barra superior employees: estilos críticos del `Header` reforzados inline (altura, avatar, alineación y tipografía) y shell principal con imports estáticos para evitar render roto por carga diferida de estilos/chunks. |
| 2026-02-13 | 1.0021 | 1.0022 | Codex | pronto-static, pronto-scripts, pronto-docs, pronto-scripts/pronto-root | Fix de despliegue static: Dockerfile ahora copia `pronto-static/scripts` para incluir `ensure-employees-legacy-assets.mjs`; rebuild exitoso de `static` + `employees`, assets actualizados en runtime (`main.js?v=1.0021`), y cierre formal de incidente en error tracker. |
| 2026-02-13 | 1.0022 | 1.0023 | Codex | pronto-employees, pronto-static, pronto-scripts, pronto-docs, pronto-scripts/pronto-root | Reubicación de versión en UI empleados: eliminación del badge flotante inferior, exposición de `system_version` en `APP_CONFIG` SSR y render de versión en footer del sidebar; rebuild de `static` + `employees` y validación visual en `http://localhost:6081/waiter/dashboard`. |
| 2026-02-13 | 1.0023 | 1.0024 | Codex | pronto-tests, pronto-docs, pronto-scripts/pronto-root | Endurecimiento de pruebas de autenticación: `auth.spec.ts` y `test_login_flows.spec.ts` ahora realizan login real por POST con CSRF y credenciales seed; cualquier `401/403` de auth falla el test explícitamente, evitando falsos verdes de “ruta disponible”. |
| 2026-02-13 | 1.0024 | 1.0025 | Codex | pronto-static, pronto-docs, pronto-scripts/pronto-root | Corrección de enrutamiento API en frontend clientes: `/api/*` vuelve a resolverse por host relativo (no forzado a 6082), eliminando preflight 404 en `POST /api/call-waiter`; se documenta reapertura y cierre formal en error tracker. |
| 2026-02-13 | 1.0025 | 1.0026 | Codex | pronto-static, pronto-employees, pronto-tests, pronto-scripts/pronto-root | Estabilización de login empleados: anti-caché en HTML/CSS versionados, corrección de tabs por rol en `DashboardView` (mesero sin módulos admin), y actualización de pruebas auth para credenciales seed actuales + endpoint canónico `API_URL` en validación de `/api/employees/auth/me`. |
| 2026-02-13 | 1.0026 | 1.0027 | Codex | pronto-static, pronto-scripts/pronto-root | Eliminada compatibilidad legacy de assets en build de empleados: se removió `node scripts/ensure-employees-legacy-assets.mjs` de `build:employees` y se eliminó el archivo `scripts/ensure-employees-legacy-assets.mjs`. |
| 2026-02-13 | 1.0027 | 1.0028 | Codex | pronto-static, pronto-scripts/pronto-root | Modularización real del bundle de empleados: rutas de `router/index.ts` convertidas a lazy imports para code-splitting por vista; `main.js` se redujo de ~82KB a ~20KB y los módulos quedaron en chunks independientes. |
| 2026-02-13 | 1.0028 | 1.0029 | Codex | pronto-tests, pronto-scripts/pronto-root | Endurecimiento anti-smoke en pruebas funcionales: se reemplazaron suites smoke de UI (`menu`, `orders`, `qa-complete`, `qa-cycle`) por flujos reales con login+CSRF+API/capacidades por rol, se eliminaron tests demo (`test_example.py`) y se reforzaron contratos SSR/login en `test_login_flows.spec.ts`. |
| 2026-02-13 | 1.0028 | 1.0029 | Codex | pronto-employees, pronto-docs, pronto-scripts/pronto-root | Corrección de carga cross-origin en SPA empleados: assets SSR cambian a rutas same-origin (`/assets/*`) para usar passthrough interno de employees y eliminar fallos CORS al cargar `main.js` y `chart.umd.min.js`; se registra incidente en error tracker. |
| 2026-02-13 | 1.0029 | 1.0030 | Codex | pronto-client, pronto-docs, pronto-scripts/pronto-root | Restaurado registro de API en `pronto-client` (`api_bp` bajo `/api`) para resolver 404 en `POST /api/call-waiter` en host 6080; validación HTTP confirma `OPTIONS 200` y `POST` deja de responder 404. |
| 2026-02-13 | 1.0030 | 1.0031 | Codex | pronto-static, pronto-docs, pronto-scripts/pronto-root | Hardening de consola employees: supresión de warning espurio en polling realtime ante fallos de red transitorios, normalización de `restaurant_assets` legacy para evitar 404 de logo (`/static/images/...`), y corrección de selectores CSS inválidos (llave huérfana + reglas scrollbar hover incompatibles). |
| 2026-02-14 | 1.0031 | 1.0032 | Codex | pronto-libs, pronto-client, pronto-api, pronto-employees, pronto-docs | Refactor completo de autenticación de clientes: Redis-backed customer_ref (TTL 60m), decorator @require_customer_session, endpoints web auth (/api/login, /api/register, /api/logout, /api/me), proxy orders con header X-PRONTO-CUSTOMER-REF, soporte para kind='kiosk', endpoints de gestión de kiosks, eliminación de client_auth.py legacy. |
| 2026-02-14 | 1.0032 | 1.0033 | Amp | pronto-client, pronto-docs | Fix BUG-20260214-003: /api/me ahora verifica is_revoked() antes de retornar datos. Fix BUG-20260214-004: auth_bp convertido a Blueprint propio, eliminado doble import y alias directo a api_bp. session.clear() añadido en login/logout. |
| 2026-02-14 | 1.0033 | 1.0038 | Amp | pronto-client, pronto-libs | Corrección de 6 bugs de seguridad en autenticación de clientes: BUG-001: notifications.py migrado de JWT a customer_ref/Redis auth + ownership check; BUG-002: Password hashing migrado de SHA256+pepper a PBKDF2 (werkzeug) con auto-rehash; BUG-003: /api/me ahora verifica revocación antes de retornar datos; BUG-004: auth_bp convertido a sub-blueprint propio, eliminado doble import; BUG-005: waiter_calls.py protegido con customer_ref auth guard; BUG-006: split_bills.py protegido con customer_ref auth guard en todos los endpoints. |
| 2026-02-14 | 1.0038 | 1.0039 | Amp | pronto-client | BUG-007: Corregido name shadowing en waiter_calls.py donde `with get_session() as session:` sobreescribía flask.session, causando UnboundLocalError en los auth guards recién agregados. Renombrado a `db_session` en get_waiter_call_status y get_waiter_call_status_alt. |
| 2026-02-15 | 1.0039 | 1.0040 | opencode | docker-compose, pronto-libs, pronto-api, pronto-client, pronto-docs | Corrección de 10 bugs de seguridad: SEC-001: CSRF client (falso positivo); SEC-002: API expuesta (puerto 6082 solo dev); SEC-003: HMAC auth (firma BFF->API); SEC-004: JWT iss/aud validation; SEC-005: JWT key separada; SEC-006: Refresh rotation; SEC-007: PII en JWT (include_pii=False); SEC-008: Redis password required; SEC-009: Rate limiting login; SEC-010: Email logging masking. |
| 2026-02-15 | 1.0040 | 1.0041 | Gemini CLI | pronto-api, pronto-employees, pronto-libs, pronto-static, pronto-docs, pronto-scripts | Auditoría integral y saneamiento: implementados +15 endpoints (branding IA, analytics reales, stats públicas, CRUD promociones, debug flows), corregido hash de agentes, eliminada fuga de estáticos en backend, corregidos falsos positivos de sesión y unificado wrapper HTTP en realtime. |
| 2026-02-18 | 1.0041 | 1.0042 | Codex | pronto-client, pronto-docs, pronto-scripts/pronto-root | Corrección de errores pendientes en API cliente: migración de converters a UUID para Order/DiningSession/SplitBill/SplitBillPerson, normalización de logging estructurado en orders.py, fix de sintaxis en shortcuts.py y saneamiento de payload JSON en solicitud de pago Clip. |
| 2026-02-18 | 1.0042 | 1.0043 | Codex | pronto-docs, pronto-scripts/pronto-root | Normalización documental de errores ya corregidos: actualización de `resueltos.txt` para marcar como RESUELTO el bloque BUG-20260214-001..007 (auth cliente), manteniendo trazabilidad consistente con archivos en `pronto-docs/resolved/`. |
| 2026-02-18 | 1.0043 | 1.0044 | Codex | pronto-docs, pronto-scripts/pronto-root | Validación de gates pre-boot ejecutada con éxito (`pronto-migrate --apply`, `pronto-init --check` con `pending=0 drift=0`) y cierre de pendientes 20260212 en `resueltos.txt`; se mantiene abierto el pendiente de parity al fallar `pronto-api-parity-check employees/clients`. |
| 2026-02-18 | 1.0044 | 1.0045 | Codex | pronto-client, pronto-static, pronto-docs, pronto-scripts/pronto-root | Resolución de parity phase 1: agregado endpoint `POST /api/login` y compatibilidad `GET /api/session/<uuid>/timeout` en client API; alineación de rutas frontend (`/api/session/*`, `/api/menu-items/*`), limpieza de referencias legacy ambiguas en employees, y verificación en verde de `pronto-api-parity-check clients` y `pronto-api-parity-check employees`. |
| 2026-02-18 | 1.0045 | 1.0046 | Codex | pronto-static, pronto-docs, pronto-scripts/pronto-root | Corrección de bug de memory leak en listeners del flujo checkout cliente: `ThankYouPage` ahora usa `AbortController` para rebinding seguro de eventos y evitar acumulación al reinicializar módulo; incidente documentado y cerrado en error tracker. |
| 2026-02-18 | 1.0046 | 1.0047 | Codex | pronto-docs, pronto-scripts/pronto-root | Cierre formal de incidente `20260213_employees_realtime_css_logo_console_errors` tras verificación en código activo: filtrado de errores transitorios en realtime, normalización de `restaurant_assets` legacy y saneamiento CSS; actualización de tracker/resueltos. |
| 2026-02-18 | 1.0047 | 1.0048 | Codex | pronto-docs, pronto-scripts/pronto-root | Cierre formal de `BUG-2026-0216-003` (checkout-offers inline CSS): validado que el bloque inline fue migrado a `menu-modals.css` y actualizado tracker/resueltos. |
| 2026-02-18 | 1.0048 | 1.0049 | Codex | pronto-docs, pronto-scripts/pronto-root | Cierre documental de pendientes de prompts: `FEATURE-20260217-001` y `PROMPT-25` marcados como RESUELTO y movidos a `pronto-docs/resolved/`; actualización de `resueltos.txt` y versionado canónico. |
| 2026-02-18 | 1.0049 | 1.0050 | Codex | pronto-client, pronto-employees, pronto-docs, pronto-scripts/pronto-root | Corrección de compliance final: eliminación de matches en gate `/<int:*_id>` mediante renombre de parámetros int en rutas API (sin cambio funcional), normalización de `ESTADO: RESUELTO` en `pronto-docs/resolved/` y cierre formal del incidente `ERR-20260218-GATE-VALIDATION-RESOLVED-CONSISTENCY`. |
| 2026-02-18 | 1.0050 | 1.0051 | Codex | pronto-docs, pronto-scripts/pronto-root | Ajuste documental en incidente resuelto `ERR-20260218-GATE-VALIDATION-RESOLVED-CONSISTENCY` para evitar falso positivo del gate (`ESTADO:\s*ABIERTO`) en texto descriptivo. |
| 2026-02-18 | 1.0051 | 1.0052 | Codex | pronto-docs, pronto-scripts/pronto-root | Normalización de error tracker: se movieron 9 archivos con `ESTADO: RESUELTO` desde `pronto-docs/errors/` a `pronto-docs/resolved/` y se completaron entradas faltantes en `pronto-docs/resueltos.txt`. |
| 2026-02-18 | 1.0052 | 1.0053 | Codex | pronto-docs, pronto-scripts/pronto-root | Normalización de formato en `pronto-docs/resueltos.txt` para eliminar espacios sobrantes en entradas nuevas de features resueltas. |
| 2026-02-18 | 1.0053 | 1.0054 | Codex | pronto-docs, pronto-scripts/pronto-root | Cierre formal de `PROMPT-24` (Contratos Publicos y API Parity) con evidencia de parity-check clients/employees en verde y gate de converters sin matches; movido a `pronto-docs/resolved/` y registrado en `resueltos.txt`. |
| 2026-02-18 | 1.0054 | 1.0055 | Codex | pronto-docs, pronto-scripts/pronto-root | Reparación de integridad en `pronto-docs/resueltos.txt`: se deshizo una concatenación accidental en una sola línea, restaurando entradas separadas por incidente (FEATURE-001..008 y PROMPT-24). |
| 2026-02-18 | 1.0055 | 1.0056 | Codex | pronto-docs, pronto-scripts/pronto-root | Cierre formal de `PROMPT-26` tras validar existencia y ejecutabilidad de scripts canónicos de mantenimiento/auditoría (`pronto-*`, `pre-commit-ai`, `run-audit.sh`); movido a `pronto-docs/resolved/`. |
| 2026-02-18 | 1.0056 | 1.0057 | Codex | pronto-docs, pronto-scripts/pronto-root | Cierre formal de `PROMPT-21` (Sistema de Gates y Agentes) con evidencia de scripts canónicos presentes, parity checks en verde y gate de authority de estados sin hallazgos; movido a `pronto-docs/resolved/`. |
| 2026-02-18 | 1.0057 | 1.0058 | Codex | pronto-docs, pronto-scripts/pronto-root | Cierre formal de `PROMPT-23` tras validación de máquina de estados canónica (`order_state_machine.py`), enums en `constants.py` y gate de authority de estados sin hallazgos; movido a `pronto-docs/resolved/`. |
| 2026-02-18 | 1.0058 | 1.0059 | Codex | pronto-docs, pronto-scripts/pronto-root | Normalización de formato en `pronto-docs/resueltos.txt` para entradas `PROMPT-26`, `PROMPT-21` y `PROMPT-23` (sin espacios extra). |
| 2026-02-18 | 1.0059 | 1.0060 | Codex | pronto-docs, pronto-scripts/pronto-root | Cierre formal de `PROMPT-22` (Arquitectura P0) con evidencia de guardrails activos: ausencia de `session` en api/employees, soporte `PRONTO_ROUTES_ONLY`, checks pre-boot (`pending=0 drift=0`, `pronto-init --check` OK) y versionado root sincronizado. |
| 2026-02-18 | 1.0060 | 1.0061 | Codex | pronto-docs, pronto-scripts/pronto-root | Normalización de formato en `pronto-docs/resueltos.txt` para la entrada de `PROMPT-22` (sin espacios extra). |
| 2026-02-18 | 1.0061 | 1.0062 | Codex | pronto-docs, pronto-static, pronto-libs, pronto-tests, pronto-scripts/pronto-root | Cierre de 3 incidencias de auditoría con evidencia actual: `AUDIT-20260215-FRONTEND` (deps lint/format + vitest presentes), `AUDIT-20260215-TEST-COVERAGE` (tests de `price_service` y `order_modification_service` existentes), `AUDIT-20260215-AUTH-WORKFLOW` (auditoría reporta cumplimiento y sin bugs bloqueantes). |
| 2026-02-18 | 1.0062 | 1.0063 | Codex | pronto-docs, pronto-scripts/pronto-root | Normalización de formato en `pronto-docs/resueltos.txt` para entradas `AUDIT-20260215-*` (sin espacios extra). |
| 2026-02-18 | 1.0063 | 1.0064 | Codex | pronto-employees, pronto-docs, pronto-scripts/pronto-root | Hardening de shell employees: `templates/index.html` migra a bundle externo con meta CSRF y sin JS inline; cierre formal de `BUG-20260210-001-TEMPLATE-CLEANUP` y movimiento a `pronto-docs/resolved/`. |
| 2026-02-18 | 1.0064 | 1.0065 | Codex | pronto-libs, pronto-employees, pronto-docs, pronto-scripts/pronto-root | Fix real de error en employees orders: `GET /api/orders` devolvía 500 por eager-load de `Order.customer` contra columna inexistente (`pronto_customers.email`). Se removió `joinedload(Order.customer)` y se corrigió manejo de warnings con IDs UUID; validado con Playwright `employees/orders.spec.ts` (2 passed). |
| 2026-02-18 | 1.0065 | 1.0066 | Codex | pronto-employees, pronto-static, pronto-docs, pronto-scripts/pronto-root | Cierre de `BUG-20250209-005-HYBRID-SSR-VUE`: verificado same-origin proxy en employees (`/assets` y `/api`), shell SPA actualizado y pruebas Playwright de orders en employees en verde. |
| 2026-02-18 | 1.0066 | 1.0067 | Codex | pronto-employees, pronto-docs, pronto-scripts/pronto-root | Cierre de `BUG-20250209-004-LEGACY-TEMPLATES`: eliminación de templates por rol en employees y consolidación en shell SPA único (`templates/index.html`) con assets compilados desde `pronto-static`. |
| 2026-02-18 | 1.0067 | 1.0068 | Codex | pronto-static, pronto-docs, pronto-scripts/pronto-root | Cierre de `AUDIT-20260215-FRONTEND-TECH-DEBT`: documento de deuda duplicado y con ejemplos obsoletos; se normaliza cierre con inventario actual de módulos frontend y evidencia de refactorizaciones previas. |
| 2026-02-18 | 1.0068 | 1.0069 | Codex | pronto-libs, pronto-docs, pronto-scripts/pronto-root | Cierre de `AUDIT-20260215-CONFIG-COMPLEXITY`: validado que `pronto_business_config` ya no existe y la configuración activa usa `pronto_system_settings` sin escritura de `.env` en runtime en `set_config_value()`. |
| 2026-02-18 | 1.0069 | 1.0070 | Codex | pronto-libs, pronto-docs, pronto-scripts/pronto-root | Cierre de `AUDIT-20260215-DB-SCHEMA-DUPLICATION`: verificación de esquema runtime sin tablas legacy de permisos ni `pronto_business_config`; RBAC unificado y configuración activa en `pronto_system_settings`. |
| 2026-02-18 | 1.0070 | 1.0071 | Codex | pronto-docs, pronto-scripts/pronto-root | Cierre de `BUG-20250209-002-BUSINESS-LOGIC-REVIEW` como checklist macro supersedida por sistema activo de gates/agentes y seguimiento granular de incidencias en error tracker. |
| 2026-02-18 | 1.0071 | 1.0072 | Codex | pronto-scripts, pronto-docs, pronto-scripts/pronto-root | Fix de idempotencia en migración `20260218_06__add_payments_table.sql` (`CREATE INDEX IF NOT EXISTS` para `ix_pronto_payments_session_id`), ejecución validada con `pronto-migrate --apply` + `pronto-init --check` (`pending=0 drift=0`) y cierre formal del incidente en error tracker. |
| 2026-02-18 | 1.0072 | 1.0073 | Codex | pronto-docs, pronto-scripts/pronto-root | Se creó checklist consolidado de bugs en `pronto-docs/errors/_reviews/20260218_bug_checklist.md` con estado por ticket (`[x]` resuelto / `[ ]` en seguimiento) para monitoreo continuo de resolución. |
| 2026-02-18 | 1.0073 | 1.0074 | Codex | pronto-docs, pronto-scripts/pronto-root | Normalización de estado en `pronto-docs/resueltos.txt` para `ERR-20260218-MIGR-20260218-06-NONIDEMPOTENT-INDEX` (`N/A` -> `RESUELTO`) y regeneración del checklist consolidado de bugs. |
| 2026-02-18 | 1.0074 | 1.0075 | Codex | pronto-docs, pronto-scripts/pronto-root | Normalización de estados de bugs históricos en `pronto-docs/resueltos.txt` (6 entradas `local-uncommitted`/`N/A` -> `RESUELTO`) y regeneración de checklist consolidado en `pronto-docs/errors/_reviews/20260218_bug_checklist.md`. |
| 2026-02-18 | 1.0075 | 1.0076 | Codex | pronto-docs, pronto-scripts/pronto-root | Se generó checklist de bugs por módulo en `pronto-docs/errors/_reviews/20260218_bug_checklist_by_module.md` para seguimiento operativo y priorización por proyecto. |
| 2026-02-18 | 1.0076 | 1.0077 | Codex | pronto-docs, pronto-scripts/pronto-root | Se creó checklist de bugs por severidad en `pronto-docs/errors/_reviews/20260218_bug_checklist_by_severity.md` (bloqueante/alta/media/baja/desconocida) para priorización semanal. |
| 2026-02-18 | 1.0077 | 1.0078 | Codex | pronto-docs, pronto-scripts/pronto-root | Se creó tablero ejecutivo `pronto-docs/errors/_reviews/20260218_bug_executive_top10.md` con Top 10 de riesgos históricos (BUG/ERR) ordenados por severidad y fecha. |
| 2026-02-18 | 1.0078 | 1.0079 | Codex | pronto-docs, pronto-scripts/pronto-root | Se creó reporte SLA de bugs en `pronto-docs/errors/_reviews/20260218_bug_sla_report.md` con promedio global, promedio por severidad y Top 10 por tiempo de resolución. |
| 2026-02-18 | 1.0079 | 1.0080 | Codex | pronto-docs, pronto-scripts/pronto-root | Se creó reporte de aging en `pronto-docs/errors/_reviews/20260218_bug_aging_report.md` con buckets de resolución (0-7, 8-30, 31-90, 90+, sin-dato) para control de deuda histórica. |
| 2026-02-18 | 1.0080 | 1.0081 | Codex | pronto-docs, pronto-scripts/pronto-root | Se creó dashboard maestro consolidado de bugs en `pronto-docs/errors/_reviews/20260218_bug_dashboard_master.md` con resumen ejecutivo e índice unificado de tableros (general, módulo, severidad, top10, SLA, aging). |
| 2026-02-18 | 1.0081 | 1.0082 | Codex | pronto-docs, pronto-scripts/pronto-root | Se creó tablero semáforo en `pronto-docs/errors/_reviews/20260218_bug_dashboard_semaforo.md` y se enlazó en el dashboard maestro para lectura ejecutiva en 10 segundos. |
| 2026-02-18 | 1.0082 | 1.0083 | Codex | pronto-docs, pronto-scripts/pronto-root | Se creó índice operativo `pronto-docs/errors/_reviews/README.md` como punto de entrada único para tableros de bugs (semáforo, maestro, checklist, severidad, top10, SLA, aging). |
| 2026-02-18 | 1.0083 | 1.0084 | Codex | pronto-docs, pronto-scripts/pronto-root | Se creó `pronto-docs/errors/_reviews/STATUS.md` como portada corta para standup y se enlazó en el índice `pronto-docs/errors/_reviews/README.md`. |
| 2026-02-18 | 1.0084 | 1.0085 | Codex | pronto-scripts, pronto-docs, pronto-scripts/pronto-root | Se creó `pronto-scripts/bin/refresh-bug-reviews.sh` para regenerar automáticamente dashboards de bugs (checklist, módulo, severidad, top10, SLA, aging, semáforo, master, status y README) y se validó su ejecución end-to-end. |
| 2026-02-19 | 1.0085 | 1.0086 | Kilo | pronto-employees, pronto-libs, pronto-tests, pronto-docs | Fix de 2 bugs bloqueantes: (1) Template index.html de employees ahora incluye window.APP_CONTEXT para Vue app, (2) customer_service.py ahora importa UUID correctamente. Tests de login actualizados para aceptar comillas dobles en APP_CONTEXT. |
| 2026-02-19 | 1.0086 | 1.0087 | Codex | pronto-scripts, pronto-docs, pronto-scripts/pronto-root | Mejora de `refresh-bug-reviews.sh`: cálculo real de bugs abiertos desde `pronto-docs/errors/*.md` e integración de ese valor en checklist, semáforo, dashboard maestro y status standup. |
| 2026-02-19 | 1.0087 | 1.0088 | Codex | pronto-scripts, pronto-docs, pronto-scripts/pronto-root | Ajuste de `refresh-bug-reviews.sh` para emitir rutas en Markdown con backticks en dashboards generados (master, semáforo, status) y validación de regeneración completa. |
| 2026-02-19 | 1.0088 | 1.0089 | Codex | pronto-scripts, pronto-docs, pronto-scripts/pronto-root | `refresh-bug-reviews.sh` ahora soporta `--date YYYY-MM-DD` (y `--help`) para cortes históricos reproducibles en dashboards; incluye validación de formato/fecha y pruebas de ejecución normal + fecha explícita. |
| 2026-02-19 | 1.0089 | 1.0090 | Codex | pronto-scripts, pronto-docs, pronto-scripts/pronto-root | `refresh-bug-reviews.sh` añade modo `--check` (exit 1 si hay bugs abiertos o en seguimiento), actualiza `--help` y documenta el comando en `pronto-docs/errors/_reviews/README.md`. |
| 2026-02-19 | 1.0090 | 1.0091 | Kilo | pronto-docs, pronto-static, pronto-employees, pronto-client | Auditoria cross-module & UX: detectados 3 bugs nuevos (ERR-20260219-MISSING-BACKEND-ENDPOINTS, ERR-20260219-HARDCODED-HOSTS, ERR-20260219-MISSING-PLACEHOLDER-ASSET). Verificacion OK de roles canonicos, estados, imports legacy y static_folder. Reporte consolidado en `pronto-docs/findings-autonomas/20260219_cross_module_ux_audit.md`. |
| 2026-02-19 | 1.0091 | 1.0092 | Codex | pronto-libs, pronto-client, pronto-docs, pronto-scripts/pronto-root | Fix de bug bloqueante de menú: `/api/menu` devolvía 500 por error de mapper (`Payment` no resuelto en `DiningSession`). Se ajustó binding ORM en `pronto_shared/models.py`, se reconstruyó `client`, se validó `GET /api/menu` = 200 y se cerró incidente `ERR-20260219-MENU-MAPPER-PAYMENT` en error tracker. |
| 2026-02-19 | 1.0091 | 1.0092 | Kilo | pronto-static | Fix de bug ReferenceError: eliminada llamada a funcion inexistente initializeApp() en menu.ts y import no utilizado. |
| 2026-02-18 | 1.0092 | 1.0093 | Amp | pronto-libs, pronto-api, pronto-prompts | Auditoría P0 del flujo de órdenes: (1) Fix bug crítico en OrderStateMachine donde handlers no llamaban _change_status(), (2) Eliminación de ~40+ magic strings reemplazados por enums canónicos (OrderStatus, PaymentStatus, SessionStatus) en 13 archivos de servicios y rutas, (3) Actualización del inventario order_request_flow_files.md con 9 archivos faltantes. |
| 2026-02-19 | 1.0093 | 1.0094 | Codex | pronto-static, pronto-employees, pronto-client, pronto-docs, pronto-scripts/pronto-root | Cierre del barrido de errores similares al fallo de menú: ajuste de método explícito GET en `PaymentFlow.vue` para parity, validación de endpoints employees (`/api/branding/config`, `/api/sessions/anonymous`, `/api/sessions/merge`), cierre y movimiento de `ERR-20260219-HARDCODED-HOSTS` a `resolved`, actualización de `resueltos.txt` y refresco de dashboards con `refresh-bug-reviews.sh`. |
| 2026-02-19 | 1.0092 | 1.0093 | Kilo | pronto-docs, pronto-static | Resolucion de bugs: (1) ERR-20260219-MISSING-BACKEND-ENDPOINTS resulto falso positivo (endpoints existen, error causado por contenedor reiniciando), (2) ERR-20260219-MISSING-PLACEHOLDER-ASSET creado placeholder-food.png, (3) Fix LSP error parametro from no usado en router. |
| 2026-02-19 | 1.0094 | 1.0095 | Codex | pronto-static, pronto-docs, pronto-scripts/pronto-root | Se corrigió bug de auth en employees: `auth-interceptor.ts` eliminó llamado a endpoint inexistente `/api/employees/auth/refresh` y usa flujo canónico de 401 con `checkAuthAndRedirect`. Se documentó/cerró `ERR-20260219-EMPLOYEES-AUTH-REFRESH-MISSING`, se movió a `resolved`, se actualizó `resueltos.txt` y se refrescaron dashboards. |
| 2026-02-19 | 1.0095 | 1.0096 | Codex | pronto-employees, pronto-static, pronto-docs, pronto-scripts/pronto-root | Fix de realtime employees: se implementó blueprint `routes/api/realtime.py` con `GET /api/realtime/orders` y `GET /api/realtime/notifications`, registro en `api/__init__.py`, validación runtime (antes 404, ahora 401 sin auth), cierre de `ERR-20260219-EMPLOYEES-REALTIME-ENDPOINTS-MISSING` y refresco de dashboards de errores. |
| 2026-02-19 | 1.0096 | 1.0097 | Codex | pronto-docs, pronto-scripts/pronto-root | Normalización de tracking: se corrigieron en `pronto-docs/resueltos.txt` las entradas `ERR-20260218-OSM-HANDLERS` y `ERR-20260218-MAGIC-STRINGS` de `pendiente` a `RESUELTO`, y se regeneraron dashboards con `refresh-bug-reviews.sh`. |
| 2026-02-19 | 1.0097 | 1.0098 | Codex | pronto-employees, pronto-docs, pronto-scripts/pronto-root | Fix de endpoint faltante para validación de notificaciones en employees: se agregó `GET/HEAD /api/orders/<uuid:order_id>` en `routes/api/orders.py`, se corrigió decorador compatible con Flask (`route(..., methods=['HEAD'])`), se validó runtime (401 sin auth, no 404), y se cerró `ERR-20260219-EMPLOYEES-ORDER-HEAD-MISSING`. |
| 2026-02-19 | 1.0098 | 1.0099 | Kilo | pronto-docs, pronto-static, pronto-tests | Verificacion final de hardcoded hosts (falso positivo - ya usa variables de entorno). Todos los bugs reportados resueltos. Tests: 20 passed, 1 failed (chef_notifications E2E). Sistema estable con 6 servicios healthy. |
| 2026-02-19 | 1.0098 | 1.0099 | Codex | pronto-scripts, pronto-scripts/pronto-root | Mejora de `pronto-api-parity-check`: filtrado de `unknown_methods` cuando la ruta está cubierta por backend (exacta o por prefijo dinámico) y ajuste de `missing_unknown_method` para evitar falsos positivos de rutas base (`/api/session`). Resultado: parity `employees` sin unknown/warnings y parity `clients` sin missing_unknown espurio. |
| 2026-02-19 | 1.0099 | 1.0100 | Kilo | pronto-static | Fix de TypeError en use-menu.ts: corregido acceso a data.categories en lugar de tratar la respuesta como array. Eliminada funcion no usada getApiBase en http.ts. |
| 2026-02-19 | 1.0100 | 1.0101 | Codex | pronto-client, pronto-docs, pronto-scripts/pronto-root | Fix de parity y endpoints en clientes: corrección de rutas de auth en `debug_panel.html`, método explícito `GET` para `/api/session/{id}/orders`, implementación de `POST /api/orders/send-confirmation` en BFF cliente (proxy a `send-ticket-email`), ajuste de `checkout.html` para enviar `session_id`, cierre de `ERR-20260219-CLIENTS-TEMPLATE-HOST-API-CALLS` y validación parity `clients` + `employees` en `ok: true`. |
| 2026-02-19 | 1.0101 | 1.0102 | Codex | pronto-docs, pronto-scripts/pronto-root | Normalización de tracker: actualización de `pronto-docs/resueltos.txt` para marcar como `RESUELTO` tres incidencias ya cerradas (`ERR-20260219-EMPLOYEES-AUTH-REFRESH-MISSING`, `ERR-20260219-EMPLOYEES-REALTIME-ENDPOINTS-MISSING`, `ERR-20260219-EMPLOYEES-ORDER-HEAD-MISSING`). |
| 2026-02-19 | 1.0100 | 1.0101 | Kilo | pronto-static, pronto-client, pronto-employees | Fix de imagenes placeholder: actualizados paths relativos a usar static_host_url de APP_CONFIG. Agregado cache buster a menu.js y main.js de employees. |
| 2026-02-19 | 1.0102 | 1.0103 | Codex | pronto-client, pronto-docs, pronto-scripts/pronto-root | Auditoría cruzada front↔backend/static en `pronto-client`, `pronto-employees`, `pronto-api`, `pronto-static`; documentación de 4 bugs abiertos en `pronto-docs/errors/` (CSRF checkout, UUID feedback, feedback cross-host/auth-CSRF, mismatch de env key para base URL de employees). |
| 2026-02-19 | 1.0103 | 1.0104 | Codex | pronto-client, pronto-docs, pronto-scripts/pronto-root | Corrección de 4 bugs de paridad/auth en clientes: CSRF en checkout y feedback, proxy BFF `POST /api/feedback/bulk`, parsing UUID en ruta `/feedback`, ajuste de clave de entorno `EMPLOYEE_API_BASE_URL`; incidencias cerradas y movidas a `pronto-docs/resolved/`. |
| 2026-02-19 | 1.0104 | 1.0105 | Codex | pronto-scripts, pronto-docs, pronto-scripts/pronto-root | Se agregó checklist ejecutable `pronto-revision-checklist.sh` para auditoría total de `pronto-api`, `pronto-employees`, `pronto-client`, `pronto-static` (inventario, parity, gates P0/P1 y assets), y se generó reporte inicial en `pronto-docs/errors/_reviews/20260219_full_revision_checklist.md`. |
| 2026-02-19 | 1.0105 | 1.0106 | Codex | pronto-api, pronto-docs, pronto-scripts/pronto-root | Corrección P0 de seguridad: eliminación de `@csrf.exempt` en `POST /api/employees/auth/login` (pronto-api), cierre de incidente `ERR-20260219-EMPLOYEES-AUTH-LOGIN-CSRF-EXEMPT`, regeneración de checklist total con estado `APPROVED`. |
| 2026-02-19 | 1.0106 | 1.0107 | Codex | .github/workflows, pronto-scripts, pronto-docs, pronto-scripts/pronto-root | Integración del gate de auditoría total en CI: `pronto-revision-checklist.sh --check` agregado a `pronto-audit.yml` y `dispatch-pronto-audit.yml`, con artefactos del checklist en ambos workflows. |
| 2026-02-19 | 1.0101 | 1.0102 | Kilo | pronto-libs | Fix de SystemSetting: corregidos nombres de atributos (config_key, config_value) en settings_service.py. Agregado metodo get_typed_value() al modelo. |
| 2026-02-19 | 1.0106 | 1.0107 | Kilo | pronto-client, pronto-employees, pronto-static, pronto-api | Resueltos 3 hallazgos de auditoria: (1) kiosk password movido a env var, (2) useFetch.ts con credentials include, (3) TODO feedback.py implementado. |
| 2026-02-19 | 1.0107 | 1.0108 | Kilo | pronto-tests | Fix de test chef_notifications.spec.ts: reescrito para usar request API en lugar de page.goto(). Eliminada dependencia de Python inline. 21/24 tests pasando (3 skipped por falta de credenciales). |
| 2026-02-19 | 1.0102 | 1.0103 | Codex | pronto-docs, pronto-scripts/pronto-root | Barrido final de errores similares: parity `clients` y `employees` en limpio (`ok: true`, sin unknown/missing), normalización de estados en `pronto-docs/resueltos.txt` para incidencias ya cerradas que figuraban como `N/A`/`local-uncommitted`, y regeneración de dashboards. |
| 2026-02-19 | 1.0103 | 1.0104 | Codex | AGENTS.md, pronto-api, pronto-employees, pronto-client, pronto-static, pronto-docs, pronto-scripts/pronto-root | Se aplicó la convención de rutas: contexto público hacia `/public/*` y autenticación hacia `/auth/*` (manteniendo aliases legacy para compatibilidad), con actualización de consumidores frontend y bump de versión del sistema. |
| 2026-02-19 | 1.0108 | 1.0109 | Codex | pronto-docs, pronto-scripts/pronto-root | Reconciliación de versionado del workspace: se alineó `PRONTO_SYSTEM_VERSION` en root y snapshot versionado (`.env`, `.env.example`, `pronto-root/.env`, `pronto-root/.env.example`) al siguiente valor canónico tras cambios concurrentes y se validó consistencia de tracker/parity. |
